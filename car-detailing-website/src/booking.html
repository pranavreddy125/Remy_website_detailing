<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Booking â€” Desert Shine Detailing</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Desert Shine Detailing</a>
      <button class="nav-toggle" aria-label="Toggle navigation"><span class="hamburger"></span></button>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="payment.html">Payment</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a class="active" href="booking.html">Booking</a></li>
          <li><a href="about.html">About Us</a></li>
        </ul>
      </nav>
      <div class="header-cta"><a class="btn signin" href="login.html">Sign In</a></div>
    </div>
  </header>

  <main class="container main-content">
    <section class="page-head">
      <h1>Book Your Appointment</h1>
      <p class="lead">Schedule your car detailing session with Desert Shine Detailing.</p>
    </section>

    <section class="booking-form">
      <form id="bookingForm">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" required>

        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" required>

        <label for="service">Select Service:
          <a class="info-link" href="services.html" aria-label="View service details">i</a>
        </label>
        <select id="service" name="service" required>
          <option value="">--Choose--</option>
          <option>Interior Detail</option>
          <option>Exterior Wash</option>
          <option>Full Detail</option>
        </select>

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required inputmode="none">
        <div class="date-shortcuts" role="group" aria-label="Quick date selection">
          <button type="button" data-date-offset="0">Today</button>
          <button type="button" data-date-offset="1">Tomorrow</button>
          <button type="button" data-date-weekend="true">This Weekend</button>
        </div>

        <label for="timeHour">Preferred Time:</label>
        <div class="time-row time-picker">
          <div class="time-selects">
            <select id="timeHour" aria-label="Hour" required>
              <option value="">HH</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
            <span class="colon">:</span>
            <select id="timeMinute" aria-label="Minutes" required>
              <option value="">MM</option>
              <option value="0">00</option>
              <option value="5">05</option>
              <option value="10">10</option>
              <option value="15">15</option>
              <option value="20">20</option>
              <option value="25">25</option>
              <option value="30">30</option>
              <option value="35">35</option>
              <option value="40">40</option>
              <option value="45">45</option>
              <option value="50">50</option>
              <option value="55">55</option>
            </select>
          </div>
          <div class="ampm-toggle" role="group" aria-label="Select AM or PM">
            <button type="button" class="active" data-period="AM">AM</button>
            <button type="button" data-period="PM">PM</button>
          </div>
          <input type="hidden" id="time" name="time" required>
        </div>

        <label for="notes">Notes (optional):</label>
        <textarea id="notes" name="notes" rows="3"></textarea>

        <button type="submit">Book Appointment</button>
      </form>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>&copy; <span id="year">2025</span> Desert Shine Detailing.</p>
    </div>
  </footer>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script src="js/main.js"></script>
  <script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbyUIXPQmX6RDVx--mLqpFcBmTvHu83OkiYaa_sXpF_-3VronnfcmFqVItJlyzOc8ahhQg/exec";
  const toastEl = document.getElementById("toast");
  const dateField = document.getElementById("date");
  const timeField = document.getElementById("time");
  const hourSelect = document.getElementById("timeHour");
  const minuteSelect = document.getElementById("timeMinute");
  const periodButtons = document.querySelectorAll(".ampm-toggle button");
  const dateShortcuts = document.querySelectorAll(".date-shortcuts button");
  const pad = value => String(value).padStart(2,"0");
  const updateTimeValue = () => {
    const hourVal = parseInt(hourSelect.value, 10);
    const minuteVal = parseInt(minuteSelect.value, 10);
    if (Number.isNaN(hourVal) || Number.isNaN(minuteVal)) {
      timeField.value = "";
      return;
    }
    let hours24 = hourVal % 12;
    if ((timeField.dataset.period || "AM") === "PM") {
      hours24 += 12;
    }
    timeField.value = `${pad(hours24)}:${pad(minuteVal)}`;
  };

  const setPeriod = (period) => {
    periodButtons.forEach(btn => {
      const isActive = btn.dataset.period === period;
      btn.classList.toggle("active", isActive);
      btn.setAttribute("aria-pressed", isActive ? "true" : "false");
    });
    timeField.dataset.period = period;
    updateTimeValue();
  };

  periodButtons.forEach(btn => {
    btn.setAttribute("aria-pressed", btn.classList.contains("active") ? "true" : "false");
    btn.addEventListener("click", () => setPeriod(btn.dataset.period));
  });

  hourSelect.addEventListener("change", updateTimeValue);
  minuteSelect.addEventListener("change", updateTimeValue);

  dateField.addEventListener("keydown", e => e.preventDefault());
  dateField.addEventListener("keypress", e => e.preventDefault());
  dateField.addEventListener("paste", e => e.preventDefault());
  const applyDateOffset = offset => {
    const base = new Date();
    base.setHours(0,0,0,0);
    base.setDate(base.getDate() + offset);
    dateField.value = base.toISOString().split("T")[0];
  };
  const applyWeekendShortcut = () => {
    const today = new Date();
    const day = today.getDay();
    const offset = (6 - day + 7) % 7;
    applyDateOffset(offset);
  };
  dateShortcuts.forEach(btn => {
    if(btn.dataset.dateOffset){
      btn.addEventListener("click", () => applyDateOffset(Number(btn.dataset.dateOffset)));
    }else if(btn.dataset.dateWeekend){
      btn.addEventListener("click", applyWeekendShortcut);
    }
  });
  setPeriod("AM");
  const showToast = message => {
    toastEl.textContent = message;
    toastEl.classList.add("visible");
    setTimeout(() => toastEl.classList.remove("visible"), 3000);
  };

  document.getElementById("bookingForm").addEventListener("submit", e => {
    e.preventDefault();
    updateTimeValue();
    if(!timeField.value){
      showToast("Please select a time to continue.");
      hourSelect.focus();
      return;
    }
    const formData = Object.fromEntries(new FormData(e.target));
    fetch(scriptURL, {
      method: "POST",
      body: JSON.stringify(formData)
    })
    .then(() => showToast("Booking requested! We'll confirm via email."))
    .catch(err => showToast("Something went wrong. Please try again."));
  });
  </script>
</body>
</html>
