<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Booking â€” Desert Shine Detailing</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Desert Shine Detailing</a>
      <button class="nav-toggle" aria-label="Toggle navigation"><span class="hamburger"></span></button>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="payment.html">Payment</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a class="active" href="booking.html">Booking</a></li>
          <li><a href="about.html">About Us</a></li>
        </ul>
      </nav>
      <div class="header-cta"><a class="btn signin" href="login.html">Sign In</a></div>
    </div>
  </header>

  <main class="container main-content">
    <section class="page-head">
      <h1>Book Your Appointment</h1>
      <p class="lead">Schedule your car detailing session with Desert Shine Detailing.</p>
    </section>

    <section class="booking-form">
      <form id="bookingForm">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" required>

        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" required>

        <label for="service">Select Service:
          <a class="info-link" href="services.html" aria-label="View service details">i</a>
        </label>
        <select id="service" name="service" required>
          <option value="">--Choose--</option>
          <option>Interior Detail</option>
          <option>Exterior Wash</option>
          <option>Full Detail</option>
        </select>

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required inputmode="none">

        <label for="time">Time:</label>
        <div class="time-row">
          <input type="time" id="time" name="time" required>
          <div class="ampm-toggle" role="group" aria-label="Select AM or PM">
            <button type="button" class="active" data-period="AM">AM</button>
            <button type="button" data-period="PM">PM</button>
          </div>
        </div>

        <label for="notes">Notes (optional):</label>
        <textarea id="notes" name="notes" rows="3"></textarea>

        <button type="submit">Book Appointment</button>
      </form>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>&copy; <span id="year">2025</span> Desert Shine Detailing.</p>
    </div>
  </footer>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script src="js/main.js"></script>
  <script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbyUIXPQmX6RDVx--mLqpFcBmTvHu83OkiYaa_sXpF_-3VronnfcmFqVItJlyzOc8ahhQg/exec";
  const toastEl = document.getElementById("toast");
  const dateField = document.getElementById("date");
  const timeField = document.getElementById("time");
  const periodButtons = document.querySelectorAll(".ampm-toggle button");
  const pad = value => String(value).padStart(2,"0");

  const setPeriod = (period, adjustValue) => {
    periodButtons.forEach(btn => {
      const isActive = btn.dataset.period === period;
      btn.classList.toggle("active", isActive);
      btn.setAttribute("aria-pressed", isActive ? "true" : "false");
    });
    timeField.dataset.period = period;

    if(adjustValue && timeField.value){
      let [hours, minutes] = timeField.value.split(":").map(Number);
      if(period === "AM" && hours >= 12){
        hours = hours === 12 ? 0 : hours - 12;
      }else if(period === "PM" && hours < 12){
        hours = hours === 0 ? 12 : hours + 12;
      }
      timeField.value = `${pad(hours)}:${pad(minutes ?? 0)}`;
    }
  };

  const syncPeriodFromTime = () => {
    if(!timeField.value) return;
    const hours = Number(timeField.value.split(":")[0]);
    setPeriod(hours >= 12 ? "PM" : "AM", false);
  };

  periodButtons.forEach(btn => {
    btn.setAttribute("aria-pressed", btn.classList.contains("active") ? "true" : "false");
    btn.addEventListener("click", () => setPeriod(btn.dataset.period, true));
  });

  timeField.addEventListener("change", syncPeriodFromTime);
  timeField.addEventListener("input", syncPeriodFromTime);

  dateField.addEventListener("keydown", e => e.preventDefault());
  dateField.addEventListener("keypress", e => e.preventDefault());
  dateField.addEventListener("paste", e => e.preventDefault());
  setPeriod("AM", false);
  const showToast = message => {
    toastEl.textContent = message;
    toastEl.classList.add("visible");
    setTimeout(() => toastEl.classList.remove("visible"), 3000);
  };

  document.getElementById("bookingForm").addEventListener("submit", e => {
    e.preventDefault();
    const formData = Object.fromEntries(new FormData(e.target));
    fetch(scriptURL, {
      method: "POST",
      body: JSON.stringify(formData)
    })
    .then(() => showToast("Booking requested! We'll confirm via email."))
    .catch(err => showToast("Something went wrong. Please try again."));
  });
  </script>
</body>
</html>
